{% extends 'base.html' %} {% block content %}
<h1 class="text-center text-xl !m-10">Your Shopping Cart</h1>
{% if cart_items %}

<div class="relative overflow-x-auto shadow-md sm:rounded-lg">
	<table
		class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"
	>
		<thead
			class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"
		>
			<tr>
				<th scope="col" class="px-16 py-3">
					<span class="sr-only">Image</span>
				</th>
				<th scope="col" class="px-6 py-3">Product</th>
				<th scope="col" class="px-6 py-3">Qty</th>
				<th scope="col" class="px-6 py-3">Price</th>
				<th scope="col" class="px-6 py-3">Action</th>
			</tr>
		</thead>
		<tbody>
			{% for item in cart_items %}

			<tr
				x-data="{quantity:{{item.quantity}}}"
				class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"
			>
				<td class="p-4">
					<img
						src="{{item.product.image.url}}"
						class="w-16 md:w-32 max-w-full max-h-full"
						alt=" {{item.product.name}} "
					/>
				</td>
				<td class="px-6 py-4 font-semibold text-gray-900 dark:text-white">
					{{item.product.name}}
				</td>
				<td class="px-6 py-4">
					<form method="post" class="flex items-center justify-end">
						{% csrf_token %}
						<button
							hx-trigger="click"
							hx-post="{%url 'handelcart' item.product.id%}"
							hx-target="body"
							@click="--quantity"
							class="inline-flex items-center justify-center p-1 me-3 text-sm font-medium h-6 w-6 text-gray-500 bg-white border border-gray-300 rounded-full focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700"
							type="button"
						>
							<span class="sr-only">Quantity button</span>
							<svg
								class="w-3 h-3"
								aria-hidden="true"
								xmlns="http://www.w3.org/2000/svg"
								fill="none"
								viewBox="0 0 18 2"
							>
								<path
									stroke="currentColor"
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M1 1h16"
								/>
							</svg>
						</button>
						<div>
							<input
								name="quantity"
								hx-trigger="change"
								hx-post="{%url 'handelcart' item.product.id%}"
								hx-target="body"
								min="1"
								type="number"
								x-model="quantity <1 ? quantity=1: quantity"
								id="first_product"
								class="bg-gray-50 w-14 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block px-2.5 py-1 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
								placeholder="1"
								required
							/>
						</div>
						<button
							hx-trigger="click"
							hx-post="{%url 'handelcart' item.product.id%}"
							hx-target="body"
							@click="++quantity"
							class="inline-flex items-center justify-center h-6 w-6 p-1 ms-3 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-full focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700"
							type="button"
						>
							<span class="sr-only">Quantity button</span>
							<svg
								class="w-3 h-3"
								aria-hidden="true"
								xmlns="http://www.w3.org/2000/svg"
								fill="none"
								viewBox="0 0 18 18"
							>
								<path
									stroke="currentColor"
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M9 1v16M1 9h16"
								/>
							</svg>
						</button>
					</form>
				</td>
				<td
					class="px-6 py-4 font-semibold text-gray-900 dark:text-white"
					x-text="quantity * {{item.product.price }}"
				></td>
				<td class="px-6 py-4">
					<a
						href="{%url 'remove_from_cart' item.id %}"
						class="font-medium text-red-600 dark:text-red-500 hover:underline"
						>Remove</a
					>
				</td>
			</tr>

			{% endfor %}
		</tbody>
	</table>

	{% endif %} {% if total_price %}
	<div class="text-center p-4">اجمالي السعر : {{ total_price }} ج.م</div>
</div>
{% else %}
<div class="text-center shadow-none">
	<p>Your cart is empty.</p>
	<a class="underline text-orange-700" href="{% url 'home' %}">back home</a>
</div>
{% endif %} {%endblock content%}
